con
	_clkfreq = 160000000
	_clkmode = 16779259
dat
	nop
	cogid	pa
	coginit	pa,##$404
	orgh	$10
	long	0	'reserved
	long	0 ' clock frequency: will default to 160000000
	long	0 ' clock mode: will default to $10007fb
	orgh	$400
 _ret_	mov	result1, #0
	org	0
entry

_test_basic
	mov	result1, #10
	mov	result2, #20
	mov	result3, #0
_test_basic_ret
	ret

_test_outoforder
	mov	result1, #15
	mov	result2, #0
	mov	result3, #5
_test_outoforder_ret
	ret

_test_mixed
	mov	result1, #1
	mov	result2, #0
	mov	result3, #30
_test_mixed_ret
	ret

_test_nested
	wrlong	fp, ptra++
	mov	fp, ptra
	add	ptra, #24
	add	fp, #4
	wrlong	#100, fp
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#200, fp
	sub	fp, #12
	mov	test_nested_tmp001_, fp
	mov	arg01, #16
	sub	fp, #4
	mov	arg02, #0
	call	#__system___gc_doalloc
	mov	arg02, result1 wz
 if_e	mov	result1, #0
 if_ne	mov	result1, arg02
	mov	arg01, result1
	mov	arg03, #16
	mov	result1, arg01
	cmps	arg01, test_nested_tmp001_ wc
 if_b	jmp	#LR__0001
	mov	_inline36__inline1__tmp001_, test_nested_tmp001_
	add	_inline36__inline1__tmp001_, #16
	cmps	arg01, _inline36__inline1__tmp001_ wc
 if_b	jmp	#LR__0005
LR__0001
	mov	_inline36__inline1___system____builtin_memmove__idx__0000, arg03
	shr	_inline36__inline1___system____builtin_memmove__idx__0000, #2 wz
 if_e	jmp	#LR__0004
	rep	@LR__0003, _inline36__inline1___system____builtin_memmove__idx__0000
LR__0002
	rdlong	_inline36__inline1__tmp001_, test_nested_tmp001_
	wrlong	_inline36__inline1__tmp001_, arg01
	add	arg01, #4
	add	test_nested_tmp001_, #4
LR__0003
LR__0004
	test	arg03, #2 wz
 if_ne	rdword	_inline36__inline1__tmp001_, test_nested_tmp001_
 if_ne	wrword	_inline36__inline1__tmp001_, arg01
 if_ne	add	arg01, #2
 if_ne	add	test_nested_tmp001_, #2
	test	arg03, #1 wz
 if_ne	rdbyte	_inline36__inline1__tmp001_, test_nested_tmp001_
 if_ne	wrbyte	_inline36__inline1__tmp001_, arg01
	jmp	#LR__0009
LR__0005
	add	arg01, arg03
	add	test_nested_tmp001_, arg03
	mov	_inline36__inline1___system____builtin_memmove__idx__0001, arg03 wz
 if_e	jmp	#LR__0008
	rep	@LR__0007, _inline36__inline1___system____builtin_memmove__idx__0001
LR__0006
	sub	arg01, #1
	sub	test_nested_tmp001_, #1
	rdbyte	_inline36__inline1__tmp001_, test_nested_tmp001_
	wrbyte	_inline36__inline1__tmp001_, arg01
LR__0007
LR__0008
LR__0009
	mov	ptra, fp
	rdlong	fp, --ptra
_test_nested_ret
	ret

_test_array
	wrlong	fp, ptra++
	mov	fp, ptra
	add	ptra, #28
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#10, fp
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#20, fp
	sub	fp, #20
	mov	result1, #30
	mov	ptra, fp
	rdlong	fp, --ptra
_test_array_ret
	ret

_test_array_struct
	wrlong	fp, ptra++
	mov	fp, ptra
	add	ptra, #36
	add	fp, #12
	wrlong	#1, fp
	add	fp, #4
	wrlong	#2, fp
	add	fp, #4
	wrlong	#0, fp
	add	fp, #4
	wrlong	#3, fp
	add	fp, #4
	wrlong	#4, fp
	add	fp, #4
	wrlong	#0, fp
	mov	result1, #3
	mov	result2, #4
	mov	result3, #0
	sub	fp, #32
	mov	ptra, fp
	rdlong	fp, --ptra
_test_array_struct_ret
	ret

__system____topofstack
	wrlong	fp, ptra++
	mov	fp, ptra
	add	ptra, #12
	add	fp, #4
	wrlong	arg01, fp
	mov	result1, fp
	sub	fp, #4
	mov	ptra, fp
	rdlong	fp, --ptra
__system____topofstack_ret
	ret

__system___gc_ptrs
	mov	_var01, __heap_ptr
	mov	_var02, _var01
	add	_var02, ##5992
	rdlong	result2, _var01 wz
 if_ne	jmp	#LR__0010
	mov	result1, _var02
	sub	result1, _var01
	wrword	#1, _var01
	mov	result2, _var01
	add	result2, #2
	wrword	##27792, result2
	mov	result2, _var01
	add	result2, #4
	wrword	#0, result2
	mov	result2, _var01
	add	result2, #6
	wrword	#1, result2
	add	_var01, #16
	shr	result1, #4
	wrword	result1, _var01
	mov	result2, _var01
	add	result2, #2
	wrword	##27791, result2
	mov	result2, _var01
	add	result2, #4
	wrword	#0, result2
	mov	result2, _var01
	add	result2, #6
	wrword	#0, result2
	sub	_var01, #16
LR__0010
	mov	result2, _var02
	mov	result1, _var01
__system___gc_ptrs_ret
	ret

__system___gc_tryalloc
	mov	__system___gc_tryalloc_size, arg01
	mov	__system___gc_tryalloc_reserveflag, arg02
	call	#__system___gc_ptrs
	mov	__system___gc_tryalloc_heap_base, result1
	mov	__system___gc_tryalloc_ptr, __system___gc_tryalloc_heap_base
	mov	__system___gc_tryalloc_availsize, #0
LR__0020
	mov	__system___gc_tryalloc_lastptr, __system___gc_tryalloc_ptr
	add	__system___gc_tryalloc_ptr, #6
	rdword	arg02, __system___gc_tryalloc_ptr wz
	mov	arg01, __system___gc_tryalloc_heap_base
 if_e	mov	result1, #0
 if_ne	shl	arg02, #4
 if_ne	add	arg01, arg02
 if_ne	mov	result1, arg01
	mov	__system___gc_tryalloc_ptr, result1 wz
 if_ne	rdword	__system___gc_tryalloc_availsize, __system___gc_tryalloc_ptr
	cmp	__system___gc_tryalloc_ptr, #0 wz
 if_ne	cmps	__system___gc_tryalloc_ptr, result2 wc
 if_a	jmp	#LR__0021
 if_ne	cmps	__system___gc_tryalloc_size, __system___gc_tryalloc_availsize wcz
 if_a	jmp	#LR__0020
LR__0021
	cmp	__system___gc_tryalloc_ptr, #0 wz
 if_e	mov	result1, __system___gc_tryalloc_ptr
 if_e	jmp	#__system___gc_tryalloc_ret
	mov	__system___gc_tryalloc__cse__0002, __system___gc_tryalloc_ptr
	add	__system___gc_tryalloc__cse__0002, #6
	rdword	__system___gc_tryalloc_linkindex, __system___gc_tryalloc__cse__0002
	cmps	__system___gc_tryalloc_size, __system___gc_tryalloc_availsize wc
 if_ae	jmp	#LR__0023
	wrword	__system___gc_tryalloc_size, __system___gc_tryalloc_ptr
	mov	__system___gc_tryalloc_linkindex, __system___gc_tryalloc_size
	shl	__system___gc_tryalloc_linkindex, #4
	mov	arg01, __system___gc_tryalloc_ptr
	add	arg01, __system___gc_tryalloc_linkindex
	sub	__system___gc_tryalloc_availsize, __system___gc_tryalloc_size
	wrword	__system___gc_tryalloc_availsize, arg01
	mov	__system___gc_tryalloc_linkindex, arg01
	add	__system___gc_tryalloc_linkindex, #2
	wrword	##27791, __system___gc_tryalloc_linkindex
	mov	__system___gc_tryalloc_linkindex, arg01
	add	__system___gc_tryalloc_linkindex, #4
	mov	arg02, __system___gc_tryalloc_ptr wz
 if_e	mov	result1, #0
 if_ne	sub	arg02, __system___gc_tryalloc_heap_base
 if_ne	shr	arg02, #4
 if_ne	mov	result1, arg02
	wrword	result1, __system___gc_tryalloc_linkindex
	mov	__system___gc_tryalloc_linkindex, arg01
	rdword	arg02, __system___gc_tryalloc__cse__0002
	add	__system___gc_tryalloc_linkindex, #6
	wrword	arg02, __system___gc_tryalloc_linkindex
	mov	__system___gc_tryalloc_saveptr, arg01
	mov	arg02, __system___gc_tryalloc_saveptr wz
 if_e	mov	result1, #0
 if_ne	sub	arg02, __system___gc_tryalloc_heap_base
 if_ne	shr	arg02, #4
 if_ne	mov	result1, arg02
	mov	__system___gc_tryalloc_linkindex, result1
	rdword	_inline7___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline7___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline7___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	__system___gc_tryalloc_nextptr, result1 wz
 if_e	jmp	#LR__0022
	cmps	__system___gc_tryalloc_nextptr, result2 wc
 if_b	add	__system___gc_tryalloc_nextptr, #4
 if_b	mov	arg02, __system___gc_tryalloc_saveptr wz
 if_c_and_z	mov	result1, #0
 if_c_and_nz	sub	arg02, __system___gc_tryalloc_heap_base
 if_c_and_nz	shr	arg02, #4
 if_c_and_nz	mov	result1, arg02
 if_b	wrword	result1, __system___gc_tryalloc_nextptr
LR__0022
LR__0023
	add	__system___gc_tryalloc_lastptr, #6
	wrword	__system___gc_tryalloc_linkindex, __system___gc_tryalloc_lastptr
	mov	__system___gc_tryalloc_saveptr, ##27776
	or	__system___gc_tryalloc_saveptr, __system___gc_tryalloc_reserveflag
	mov	__system___gc_tryalloc_nextptr, __system___gc_tryalloc_ptr
	add	__system___gc_tryalloc_nextptr, #2
	mov	result1, #0
	cogid	result1
	or	__system___gc_tryalloc_saveptr, result1
	wrword	__system___gc_tryalloc_saveptr, __system___gc_tryalloc_nextptr
	mov	__system___gc_tryalloc_saveptr, __system___gc_tryalloc_heap_base
	add	__system___gc_tryalloc_saveptr, #8
	rdword	__system___gc_tryalloc_nextptr, __system___gc_tryalloc_saveptr
	wrword	__system___gc_tryalloc_nextptr, __system___gc_tryalloc__cse__0002
	mov	arg02, __system___gc_tryalloc_ptr wz
 if_e	mov	result1, #0
 if_ne	sub	arg02, __system___gc_tryalloc_heap_base
 if_ne	shr	arg02, #4
 if_ne	mov	result1, arg02
	wrword	result1, __system___gc_tryalloc_saveptr
	add	__system___gc_tryalloc_ptr, #8
	mov	result1, __system___gc_tryalloc_ptr
__system___gc_tryalloc_ret
	ret

__system___gc_doalloc
	mov	__system___gc_doalloc_size, arg01 wz
	mov	__system___gc_doalloc_reserveflag, arg02
 if_e	mov	result1, #0
 if_e	jmp	#__system___gc_doalloc_ret
	add	__system___gc_doalloc_size, #23
	andn	__system___gc_doalloc_size, #15
	shr	__system___gc_doalloc_size, #4
	mov	__system___gc_doalloc__cse__0004, ptr___system__dat__
	add	__system___gc_doalloc__cse__0004, #24
	mov	arg01, __system___gc_doalloc__cse__0004
	mov	result1, #0
	cogid	result1
	add	result1, #256
LR__0030
	rdlong	_inline11___system___lockmem_r, arg01 wz
 if_e	wrlong	result1, arg01
 if_e	rdlong	_inline11___system___lockmem_r, arg01
 if_e	rdlong	_inline11___system___lockmem_r, arg01
	cmp	_inline11___system___lockmem_r, result1 wz
 if_ne	jmp	#LR__0030
	mov	arg01, __system___gc_doalloc_size
	mov	arg02, __system___gc_doalloc_reserveflag
	call	#__system___gc_tryalloc
	mov	_inline11___system___lockmem_r, result1 wz
 if_ne	jmp	#LR__0031
	call	#__system___gc_docollect
	mov	arg01, __system___gc_doalloc_size
	mov	arg02, __system___gc_doalloc_reserveflag
	call	#__system___gc_tryalloc
	mov	_inline11___system___lockmem_r, result1
LR__0031
	wrlong	#0, __system___gc_doalloc__cse__0004
	cmp	_inline11___system___lockmem_r, #0 wz
 if_ne	shl	__system___gc_doalloc_size, #4
 if_ne	sub	__system___gc_doalloc_size, #8
 if_ne	shr	__system___gc_doalloc_size, #2
 if_ne	sub	__system___gc_doalloc_size, #1 wc
 if_a	setq	__system___gc_doalloc_size
 if_a	wrlong	#0, _inline11___system___lockmem_r
	mov	result1, _inline11___system___lockmem_r
__system___gc_doalloc_ret
	ret

__system___gc_isvalidptr
	bitl	arg03, #248
	sub	arg03, #8
	cmps	arg03, arg01 wc
 if_b	jmp	#LR__0040
	cmps	arg03, arg02 wc
 if_b	jmp	#LR__0041
LR__0040
	mov	result1, #0
	jmp	#__system___gc_isvalidptr_ret
LR__0041
	mov	_var01, arg03
	xor	_var01, arg01
	test	_var01, #15 wz
 if_ne	mov	result1, #0
 if_ne	jmp	#__system___gc_isvalidptr_ret
	mov	_var01, arg03
	add	_var01, #2
	rdword	_var01, _var01
	and	_var01, ##65472
	cmp	_var01, ##27776 wz
 if_ne	mov	result1, #0
 if_e	mov	result1, arg03
__system___gc_isvalidptr_ret
	ret

__system___gc_docollect
	call	#__system___gc_ptrs
	mov	__system___gc_docollect_endheap, result2
	mov	__system___gc_docollect_startheap, result1
	mov	arg01, __system___gc_docollect_startheap
	rdword	_inline25___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline25___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline25___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	__system___gc_docollect_ptr, result1 wz
	mov	result1, #0
	cogid	result1
	mov	__system___gc_docollect_ourid, result1
 if_e	jmp	#LR__0051
LR__0050
	cmps	__system___gc_docollect_ptr, __system___gc_docollect_endheap wc
 if_ae	jmp	#LR__0051
	mov	__system___gc_docollect__cse__0000, __system___gc_docollect_ptr
	add	__system___gc_docollect__cse__0000, #2
	rdword	__system___gc_docollect__cse__0001, __system___gc_docollect__cse__0000
	andn	__system___gc_docollect__cse__0001, #32
	wrword	__system___gc_docollect__cse__0001, __system___gc_docollect__cse__0000
	mov	arg01, __system___gc_docollect_ptr
	rdword	_inline27___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline27___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline27___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	__system___gc_docollect_ptr, result1 wz
 if_ne	jmp	#LR__0050
LR__0051
	mov	_system___gc_docollect_tmp001_, #0
	mov	arg01, #0
	call	#__system____topofstack
	mov	arg02, result1
	mov	arg01, #0
	mov	_inline28___system___gc_markhub_startaddr, #0
	mov	_inline28___system___gc_markhub_endaddr, arg02
	call	#__system___gc_ptrs
	mov	_inline28___system___gc_markhub_heap_base, result1
	mov	_inline28___system___gc_markhub_heap_end, result2
LR__0052
	cmps	_inline28___system___gc_markhub_startaddr, _inline28___system___gc_markhub_endaddr wc
 if_ae	jmp	#LR__0053
	rdlong	arg03, _inline28___system___gc_markhub_startaddr
	add	_inline28___system___gc_markhub_startaddr, #4
	mov	arg02, _inline28___system___gc_markhub_heap_end
	mov	arg01, _inline28___system___gc_markhub_heap_base
	call	#__system___gc_isvalidptr
	mov	_inline28___system___gc_markhub_ptr, result1 wz
 if_e	jmp	#LR__0052
	mov	arg01, _inline28___system___gc_markhub_ptr
	mov	result1, #0
	add	arg01, #2
	rdword	arg01, arg01
	cmp	arg01, ##27791 wz
 if_e	neg	result1, #1
	cmp	result1, #0 wz
 if_e	add	_inline28___system___gc_markhub_ptr, #2
 if_e	rdword	_inline28___system___gc_markhub_flags, _inline28___system___gc_markhub_ptr
 if_e	andn	_inline28___system___gc_markhub_flags, #15
 if_e	or	_inline28___system___gc_markhub_flags, #46
 if_e	wrword	_inline28___system___gc_markhub_flags, _inline28___system___gc_markhub_ptr
	jmp	#LR__0052
LR__0053
	call	#__system___gc_ptrs
	mov	_inline29___system___gc_markcog_heap_base, result1
	mov	_inline29___system___gc_markcog_heap_end, result2
	mov	_inline29___system___gc_markcog_cogaddr, #495
LR__0054
	'.live	_inline29___system___gc_markcog_cogaddr
	alts	_inline29___system___gc_markcog_cogaddr, #0
	mov	_inline29___system___gc_markcog_ptr, _inline29___system___gc_markcog_cogaddr
	mov	arg02, _inline29___system___gc_markcog_heap_end
	mov	arg01, _inline29___system___gc_markcog_heap_base
	mov	arg03, _inline29___system___gc_markcog_ptr
	call	#__system___gc_isvalidptr
	cmp	result1, #0 wz
 if_ne	add	result1, #2
 if_ne	rdword	_inline29___system___gc_markcog__cse__0001, result1
 if_ne	or	_inline29___system___gc_markcog__cse__0001, #32
 if_ne	wrword	_inline29___system___gc_markcog__cse__0001, result1
	sub	_inline29___system___gc_markcog_cogaddr, #1
	cmps	_inline29___system___gc_markcog_cogaddr, #0 wc
 if_ae	jmp	#LR__0054
	mov	arg01, __system___gc_docollect_startheap
	rdword	_inline30___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline30___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline30___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	__system___gc_docollect_nextptr, result1 wz
 if_e	jmp	#__system___gc_docollect_ret
LR__0055
	mov	__system___gc_docollect_ptr, __system___gc_docollect_nextptr
	mov	arg01, __system___gc_docollect_ptr
	rdword	_inline31___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline31___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline31___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	__system___gc_docollect_nextptr, result1
	mov	_system___gc_docollect_tmp001_, __system___gc_docollect_ptr
	add	_system___gc_docollect_tmp001_, #2
	rdword	_system___gc_docollect_tmp001_, _system___gc_docollect_tmp001_
	test	_system___gc_docollect_tmp001_, #32 wz
 if_e	test	_system___gc_docollect_tmp001_, #16 wz
 if_ne	jmp	#LR__0063
	getnib	_system___gc_docollect_tmp001_, _system___gc_docollect_tmp001_, #0
	cmp	_system___gc_docollect_tmp001_, __system___gc_docollect_ourid wz
 if_ne	cmp	_system___gc_docollect_tmp001_, #14 wz
 if_ne	jmp	#LR__0062
	mov	arg01, __system___gc_docollect_ptr
	mov	_inline32___system___gc_dofree_ptr, arg01
	call	#__system___gc_ptrs
	mov	_inline32___system___gc_dofree_heapbase, result1
	mov	_inline32___system___gc_dofree__cse__0000, _inline32___system___gc_dofree_ptr
	add	_inline32___system___gc_dofree__cse__0000, #2
	wrword	##27791, _inline32___system___gc_dofree__cse__0000
	mov	_inline32___system___gc_dofree_prevptr, _inline32___system___gc_dofree_ptr
	mov	arg01, _inline32___system___gc_dofree_ptr
	rdword	_inline32__inline14___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline32__inline14___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline32__inline14___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	_inline32__inline14___system___gc_nextBlockPtr_t, result1
LR__0056
	add	_inline32___system___gc_dofree_prevptr, #4
	rdword	arg02, _inline32___system___gc_dofree_prevptr wz
	mov	arg01, _inline32___system___gc_dofree_heapbase
 if_e	mov	result1, #0
 if_ne	shl	arg02, #4
 if_ne	add	arg01, arg02
 if_ne	mov	result1, arg01
	mov	_inline32___system___gc_dofree_prevptr, result1 wz
 if_e	jmp	#LR__0057
	mov	arg01, _inline32___system___gc_dofree_prevptr
	mov	result1, #0
	add	arg01, #2
	rdword	arg01, arg01
	cmp	arg01, ##27791 wz
 if_e	neg	result1, #1
	cmp	result1, #0 wz
 if_e	jmp	#LR__0056
LR__0057
	cmp	_inline32___system___gc_dofree_prevptr, #0 wz
 if_e	mov	_inline32___system___gc_dofree_prevptr, _inline32___system___gc_dofree_heapbase
	mov	_inline32___system___gc_dofree__cse__0002, _inline32___system___gc_dofree_prevptr
	add	_inline32___system___gc_dofree__cse__0002, #6
	mov	_inline32___system___gc_dofree__cse__0003, _inline32___system___gc_dofree_ptr
	rdword	arg02, _inline32___system___gc_dofree__cse__0002
	add	_inline32___system___gc_dofree__cse__0003, #6
	wrword	arg02, _inline32___system___gc_dofree__cse__0003
	mov	arg02, _inline32___system___gc_dofree_ptr wz
 if_e	mov	result1, #0
 if_ne	sub	arg02, _inline32___system___gc_dofree_heapbase
 if_ne	shr	arg02, #4
 if_ne	mov	result1, arg02
	wrword	result1, _inline32___system___gc_dofree__cse__0002
	cmp	_inline32___system___gc_dofree_prevptr, _inline32___system___gc_dofree_heapbase wz
 if_e	jmp	#LR__0059
	mov	arg01, _inline32___system___gc_dofree_prevptr
	rdword	_inline32__inline18___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline32__inline18___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline32__inline18___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	cmp	result1, _inline32___system___gc_dofree_ptr wz
 if_ne	jmp	#LR__0058
	rdword	arg01, _inline32___system___gc_dofree_prevptr
	rdword	result1, _inline32___system___gc_dofree_ptr
	add	arg01, result1
	wrword	arg01, _inline32___system___gc_dofree_prevptr
	wrword	#0, _inline32___system___gc_dofree__cse__0000
	mov	arg01, _inline32___system___gc_dofree_ptr
	rdword	_inline32__inline19___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline32__inline19___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline32__inline19___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	_inline32__inline14___system___gc_nextBlockPtr_t, result1
	cmps	_inline32__inline14___system___gc_nextBlockPtr_t, result2 wc
 if_b	mov	_inline32___system___gc_dofree__cse__0000, _inline32__inline14___system___gc_nextBlockPtr_t
 if_b	add	_inline32___system___gc_dofree__cse__0000, #4
 if_b	mov	arg02, _inline32___system___gc_dofree_prevptr wz
 if_c_and_z	mov	result1, #0
 if_c_and_nz	sub	arg02, _inline32___system___gc_dofree_heapbase
 if_c_and_nz	shr	arg02, #4
 if_c_and_nz	mov	result1, arg02
 if_b	wrword	result1, _inline32___system___gc_dofree__cse__0000
	rdword	_inline32___system___gc_dofree__cse__0000, _inline32___system___gc_dofree__cse__0003
	wrword	_inline32___system___gc_dofree__cse__0000, _inline32___system___gc_dofree__cse__0002
	wrword	#0, _inline32___system___gc_dofree__cse__0003
	mov	_inline32___system___gc_dofree_ptr, _inline32___system___gc_dofree_prevptr
LR__0058
LR__0059
	mov	arg01, _inline32___system___gc_dofree_ptr
	rdword	_inline32__inline19___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline32__inline19___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline32__inline19___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	_inline32___system___gc_dofree__cse__0003, result1 wz
 if_e	jmp	#LR__0061
	cmps	_inline32___system___gc_dofree__cse__0003, result2 wc
 if_ae	jmp	#LR__0061
	mov	arg01, _inline32___system___gc_dofree__cse__0003
	mov	result1, #0
	add	arg01, #2
	rdword	arg01, arg01
	cmp	arg01, ##27791 wz
 if_e	neg	result1, #1
	cmp	result1, #0 wz
 if_e	jmp	#LR__0061
	mov	_inline32___system___gc_dofree_prevptr, _inline32___system___gc_dofree_ptr
	rdword	_inline32__inline14___system___gc_nextBlockPtr_t, _inline32___system___gc_dofree_prevptr
	mov	arg01, _inline32___system___gc_dofree__cse__0003
	rdword	_inline32___system___gc_dofree__cse__0003, arg01
	add	_inline32__inline14___system___gc_nextBlockPtr_t, _inline32___system___gc_dofree__cse__0003
	wrword	_inline32__inline14___system___gc_nextBlockPtr_t, _inline32___system___gc_dofree_prevptr
	mov	_inline32__inline14___system___gc_nextBlockPtr_t, arg01
	add	_inline32__inline14___system___gc_nextBlockPtr_t, #6
	mov	_inline32___system___gc_dofree__cse__0002, _inline32___system___gc_dofree_prevptr
	rdword	_inline32___system___gc_dofree__cse__0003, _inline32__inline14___system___gc_nextBlockPtr_t
	add	_inline32___system___gc_dofree__cse__0002, #6
	wrword	_inline32___system___gc_dofree__cse__0003, _inline32___system___gc_dofree__cse__0002
	mov	_inline32___system___gc_dofree__cse__0003, arg01
	add	_inline32___system___gc_dofree__cse__0003, #2
	wrword	#170, _inline32___system___gc_dofree__cse__0003
	wrword	#0, _inline32__inline14___system___gc_nextBlockPtr_t
	rdword	_inline32__inline23___system___gc_nextBlockPtr_t, arg01 wz
 if_e	mov	result1, #0
 if_ne	shl	_inline32__inline23___system___gc_nextBlockPtr_t, #4
 if_ne	add	arg01, _inline32__inline23___system___gc_nextBlockPtr_t
 if_ne	mov	result1, arg01
	mov	_inline32__inline14___system___gc_nextBlockPtr_t, result1 wz
 if_e	jmp	#LR__0060
	cmps	_inline32__inline14___system___gc_nextBlockPtr_t, result2 wc
 if_b	mov	_inline32___system___gc_dofree__cse__0003, _inline32__inline14___system___gc_nextBlockPtr_t
 if_b	add	_inline32___system___gc_dofree__cse__0003, #4
 if_b	mov	arg02, _inline32___system___gc_dofree_prevptr wz
 if_c_and_z	mov	result1, #0
 if_c_and_nz	sub	arg02, _inline32___system___gc_dofree_heapbase
 if_c_and_nz	shr	arg02, #4
 if_c_and_nz	mov	result1, arg02
 if_b	wrword	result1, _inline32___system___gc_dofree__cse__0003
LR__0060
LR__0061
	mov	result1, _inline32__inline14___system___gc_nextBlockPtr_t
	mov	__system___gc_docollect_nextptr, result1
LR__0062
LR__0063
	cmp	__system___gc_docollect_nextptr, #0 wz
 if_ne	cmps	__system___gc_docollect_nextptr, __system___gc_docollect_endheap wc
 if_c_and_nz	jmp	#LR__0055
__system___gc_docollect_ret
	ret
builtin_bytefill_
        shr	arg03, #1 wc
 if_c   wrbyte	arg02, arg01
 if_c   add	arg01, #1
        movbyts	arg02, #0
builtin_wordfill_
        shr	arg03, #1 wc
 if_c   wrword	arg02, arg01
 if_c   add	arg01, #2
        setword	arg02, arg02, #1
builtin_longfill_
        wrfast	#0,arg01
        cmp	arg03, #0 wz
 if_nz  rep	#1, arg03
 if_nz  wflong	arg02
        ret
COUNT_
    long 0
RETADDR_
    long 0
fp
    long 0
pushregs_
    pop  pa
    pop  RETADDR_
    tjz  COUNT_, #pushregs_done_
    altd  COUNT_, #511
    setq #0-0
    wrlong local01, ptra++
pushregs_done_
    setq #2 ' push 3 registers starting at COUNT_
    wrlong COUNT_, ptra++
    mov    fp, ptra
    jmp  pa
 popregs_
    pop    pa
    setq   #2
    rdlong COUNT_, --ptra
    djf    COUNT_, #popregs__ret
    setq   COUNT_
    rdlong local01, --ptra
popregs__ret
    push   RETADDR_
    jmp    pa

__heap_ptr
	long	@__heap_base
ptr___system__dat__
	long	@__system__dat_
result1
	long	0
result2
	long	1
result3
	long	2
COG_BSS_START
	fit	480
	orgh
	alignl
__system__dat_
	byte	$00, $00, $00, $00, $03, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
	byte	$00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
__heap_base
	long	0[1502]
stackspace
	long	0[1]
	org	COG_BSS_START
__system___gc_doalloc__cse__0004
	res	1
__system___gc_doalloc_reserveflag
	res	1
__system___gc_doalloc_size
	res	1
__system___gc_docollect__cse__0000
	res	1
__system___gc_docollect__cse__0001
	res	1
__system___gc_docollect_endheap
	res	1
__system___gc_docollect_nextptr
	res	1
__system___gc_docollect_ourid
	res	1
__system___gc_docollect_ptr
	res	1
__system___gc_docollect_startheap
	res	1
__system___gc_tryalloc__cse__0002
	res	1
__system___gc_tryalloc_availsize
	res	1
__system___gc_tryalloc_heap_base
	res	1
__system___gc_tryalloc_lastptr
	res	1
__system___gc_tryalloc_linkindex
	res	1
__system___gc_tryalloc_nextptr
	res	1
__system___gc_tryalloc_ptr
	res	1
__system___gc_tryalloc_reserveflag
	res	1
__system___gc_tryalloc_saveptr
	res	1
__system___gc_tryalloc_size
	res	1
_inline11___system___lockmem_r
	res	1
_inline25___system___gc_nextBlockPtr_t
	res	1
_inline27___system___gc_nextBlockPtr_t
	res	1
_inline28___system___gc_markhub_endaddr
	res	1
_inline28___system___gc_markhub_flags
	res	1
_inline28___system___gc_markhub_heap_base
	res	1
_inline28___system___gc_markhub_heap_end
	res	1
_inline28___system___gc_markhub_ptr
	res	1
_inline28___system___gc_markhub_startaddr
	res	1
_inline29___system___gc_markcog__cse__0001
	res	1
_inline29___system___gc_markcog_cogaddr
	res	1
_inline29___system___gc_markcog_heap_base
	res	1
_inline29___system___gc_markcog_heap_end
	res	1
_inline29___system___gc_markcog_ptr
	res	1
_inline30___system___gc_nextBlockPtr_t
	res	1
_inline31___system___gc_nextBlockPtr_t
	res	1
_inline32___system___gc_dofree__cse__0000
	res	1
_inline32___system___gc_dofree__cse__0002
	res	1
_inline32___system___gc_dofree__cse__0003
	res	1
_inline32___system___gc_dofree_heapbase
	res	1
_inline32___system___gc_dofree_prevptr
	res	1
_inline32___system___gc_dofree_ptr
	res	1
_inline32__inline14___system___gc_nextBlockPtr_t
	res	1
_inline32__inline18___system___gc_nextBlockPtr_t
	res	1
_inline32__inline19___system___gc_nextBlockPtr_t
	res	1
_inline32__inline23___system___gc_nextBlockPtr_t
	res	1
_inline36__inline1___system____builtin_memmove__idx__0000
	res	1
_inline36__inline1___system____builtin_memmove__idx__0001
	res	1
_inline36__inline1__tmp001_
	res	1
_inline7___system___gc_nextBlockPtr_t
	res	1
_system___gc_docollect_tmp001_
	res	1
_var01
	res	1
_var02
	res	1
_var03
	res	1
arg01
	res	1
arg02
	res	1
arg03
	res	1
local01
	res	1
test_nested_tmp001_
	res	1
	fit	480
